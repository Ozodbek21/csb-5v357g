(this["webpackJsonpagora-chat-example"]=this["webpackJsonpagora-chat-example"]||[]).push([[0],{11:function(e,t,n){e.exports=n(23)},16:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),s=(n(16),n(3)),u=(n(17),n(10)),i=n(1),l=n.n(i),f=n(5),m=n(8),h=n.n(m),p=Math.floor(1000000001*Math.random()),d=function(e,t){var n=Object(a.useState)([]),r=Object(s.a)(n,2),c=r[0],o=r[1],i=Object(a.useRef)(t.createChannel("channelId")).current,m=Object(a.useRef)(h()({luminosity:"dark"})).current,d=function(){var n=Object(f.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.login({uid:p.toString()});case 2:return n.next=4,i.join();case 4:return n.next=6,t.setLocalUserAttributes({name:e,color:m});case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();Object(a.useEffect)((function(){d()}),[]),Object(a.useEffect)((function(){i.on("ChannelMessage",(function(e,t){g(e,t)}))}),[]);var g=function(){var e=Object(f.a)(l.a.mark((function e(n,a){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getUserAttributes(a);case 2:r=e.sent,console.log(n),"TEXT"===n.messageType&&(c={user:r,message:n.text},j(c));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=Object(a.useState)(),b=Object(s.a)(v,2),x=b[0],j=b[1],w=function(){var e=Object(f.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.sendMessage({text:t}).then((function(){j({user:{name:"Current User (Me)",color:m},message:t})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x&&o([].concat(Object(u.a)(c),[x]))}),[x]),{sendChannelMessage:w,messages:c}},g=n(9);var v=n.n(g).a.createInstance("4f2102e306e244e88ed165dc12a4bfa7"),b=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t}(5);var x=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],o=d(b,v),u=o.messages,i=o.sendChannelMessage;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"d-flex flex-column py-5 px-3"},u.map((function(e,t){return r.a.createElement("div",{className:"row",key:"chat".concat(t+1)},r.a.createElement("h5",{className:"font-size-15",style:{color:e.user.color}},"".concat(e.user.name," :")),r.a.createElement("p",{className:"text-break"}," ".concat(e.message)))}))),r.a.createElement("div",null,r.a.createElement("textarea",{placeholder:"Type your message here",className:"form-control",onChange:function(e){return c(e.target.value)},"aria-label":"With textarea",value:n,onKeyPress:function(e){if(13===e.charCode){if(e.preventDefault(),0===n.trim().length)return;i(e.currentTarget.value),c("")}}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(22);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.ed7b7808.chunk.js.map